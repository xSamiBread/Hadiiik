namespace SpriteKind {
    export const body_part = SpriteKind.create()
    export const BadFood = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = 0
    dy = -6
})
function AddBodyPart () {
    body.push(sprites.create(bodypartTexture, SpriteKind.body_part))
    body[body.length - 1].x = body[body.length - 2].x - dx
    body[body.length - 1].y = body[body.length - 2].y - dy
}
function changeGameTexturesAndKillBadFood (backgroundImage: Image, bodyImage: Image) {
    scene.setBackgroundImage(backgroundImage)
    for (let part of body) {
        part.setImage(bodyImage)
        bodypartTexture = bodyImage
    }
    for (let value of sprites.allOfKind(SpriteKind.BadFood)) {
        value.destroy()
    }
}
function SpawnFood () {
    mySprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 1 1 . . . . . . . . . . 
        . . . 1 7 3 1 . . . . . . . . . 
        . . . 1 7 3 3 1 . . . . . . . . 
        . . . 1 7 3 f 3 1 . . . . . . . 
        . . . 1 7 3 3 3 3 1 . . . . . . 
        . . . 1 7 7 f 3 f 3 1 . . . . . 
        . . . . 1 7 7 3 3 3 3 1 . . . . 
        . . . . . 1 7 7 3 f 3 3 1 . . . 
        . . . . . . 1 7 7 7 7 7 7 1 . . 
        . . . . . . . 1 1 1 1 1 1 . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Food)
    mySprite.setPosition(randint(0, scene.screenWidth()), randint(0, scene.screenHeight()))
    mySprite.setFlag(SpriteFlag.StayInScreen, true)
    for (let value of body) {
        if (mySprite.overlapsWith(value)) {
            mySprite.destroy()
            SpawnBadFood()
        }
    }
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = -6
    dy = 0
})
function SetUpSnake () {
    head = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Player)
    dx = 8
    dy = 0
    bodypartTexture = img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `
    body = [sprites.create(bodypartTexture, SpriteKind.body_part)]
    head.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2)
    body[0].setPosition(head.x - dx, head.y - dy)
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = 6
    dy = 0
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = 0
    dy = 6
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    music.baDing.play()
    otherSprite.destroy(effects.spray, 500)
    AddBodyPart()
    hungry = true
    info.changeScoreBy(1)
    if (info.score() == 5) {
        changeGameTexturesAndKillBadFood(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ...............................................................33...............................................................................................
            ..............................................................3..333............................................................................................
            .............................................................3......333.........................................................................................
            .......................................................3333333333333333333......................................................................................
            .......................................................3...3.............33333333333333333333333................................................................
            ......................................................3..33......33333333333333333333......3....3...............................................................
            ......................................................33333333333................333.......3.....3..............................................................
            .....................................................3.3............................333....3.....3..............................................................
            .....................................................333...............................33..3......3.............................................................
            ....................................................33.3...............................3....3......3............................................................
            ....................................................3.3................................3....3......3............................................................
            ...................................................3..3...............................3.....33......3...........................................................
            ..................................................33..3..............333333...........3...333.3......3..........................................................
            .................................................33...3..............3.....33333333333.333..3..3......3.........................................................
            ..................................3.............3.3..3..............3................3333333333.3.....3.........................................................
            ..................................3............3.3...3.............3...............33........3.3333333333.......................................................
            ...................................3.........33..3...3.............3............333.3........3....3.....333333..................................................
            ....................................3.......3...3....3............3...........33...3.........3.....3....3.....3.................................................
            ....................................3......3....3....3...........3.........333....3...33333...3.....3....3....3.................................................
            .....................................3....3....3....3............3.......33.......3...3....33333333333....3....3................................................
            .....................................3...3.....3....3...........3.....333........3....3.......3......33333333333................................................
            ......................................3.3.....3.....3..........3....33...........3....3.......3........3...3...33333............................................
            .......................................3.33...3.....3..........3..33............3.....3.......3.........3...3...3.3.............................................
            .......................................3...3.3.....3..........3333..............3.....3........3.........3...3..3.3.............................................
            ........................................3...33.....3.........33................3.......3.......3..........3..3...3..............................................
            .........................................3..3.3....3.......333........3333333333.......3.......3...........3.33..3..............................................
            .........................................3..3..33..3333333333333333333.................3.....333...........33...3.3.............................................
            ..........................................3333333333.......33..........................3.3333............33..3..3.3.............................................
            ...........................................3......33.......33........................3333..............33.....33..3.............................................
            ..........................................3.......3.33....3..3..................33333...3............33........3...3............................................
            ..........................................3.......3...3..3...3..............3333........3..........33........33....3............................................
            .........................................33......33....333....3........33333............3........33........33.3.....3...........................................
            ...........................................3333....33...33....3....3333.................3......33........33...3.....3...........................................
            ...............................................333...333..33..33333.....................3....33.........3....3.......3..........................................
            ..................................................3333.33...3333........................3..33.........33.....3.......3..........................................
            ......................................................33333....3.........................33.........33......3........3..........................................
            ........................................................333333..3......................33.........33........3.........3.........................................
            ...........................................................333333....................33..........3.........3........333.........................................
            ..............................................................333333...............33..........33.....333333...33333............................................
            .................................................................3333333.........33.........3333333333.....3333.................................................
            ..................................................................3.333.3333...33.33333333333.........33333.....................................................
            ....................................3.............................3...333333333333........3......33333..........................................................
            ....................................3..............................33333.333............33..33333...............................................................
            ....................................3......................................3333.......333333....................................................................
            ....................................3........................................33333.33333........................................................................
            .....................................3.........................................33333............................................................................
            .....................................3..........................................................................................................................
            .....................................3..........................................................................................................................
            ......................................3.........................................................................................................................
            ......................................3..........................................................................................333............................
            ................................3......3........................................................................................3..3............................
            ................................3.......3.....................................................................................33...3............................
            ................................3........33.....33........3.................................................................33.....3............................
            ................................3..........33333.3.......33................................................................3.......3............................
            ................................3...............3........33.......................33......................................3........3............................
            ...............................3................3.......3..3.......................33....................................3.........3............................
            ...............................3................3.......3..3.......................3.33................................33.........3.............................
            ...............................3................3......3...3.......................3...33.............................3...........3.............................
            ...............................3...............3......3....3.......................3.....3..........................33............3.............................
            ...............................3...............3......3....3......................3.......33.......................3.............3..............................
            ...............................3..............3....33333333333333333333.3.........3........33.....................3..............3..............................
            ...............................3..............3......3.....3...........33.........3....3333......................3..............3...............................
            ...............................3.............3.......3.....3......................3.............................3..............3................................
            ...............................3.............3......33....3......................3.............................3...............3................................
            ...............................3..........................3......................3.............................................3................................
            ..............................3...........................3.....................3.............................................3.................................
            ..........................................................3.....................3............................................3..................................
            .........................................................3.....................3............................................3...................................
            ........................................................3......................3............................................3...................................
            .......................................................33.......................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `, img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (info.score() == 10) {
        changeGameTexturesAndKillBadFood(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            .............................................................................7..................................................................................
            ............................................................................7.7.................................................................................
            ...........................................................................7...77...............................................................................
            ...............................................................33.........7......7..............................................................................
            ..............................................................3..333.....7........7.............................................................................
            .............................................................3......333.7........777............................................................................
            .......................................................3333333333333333733.....777..7...........................................................................
            .......................................................3...3..........7..333377337333773333333377...............................................................
            ......................................................3..33......33337333377733373333..7...777773...............................................................
            ......................................................33333337333...7...77......7333....7773...7.3..............................................................
            .....................................................3.3....7......777777.......7...3777.7.3...7.3..............................................................
            .....................................................333....7.....777....777777777777..33.73..7...3......7777...................................................
            ....................................................33.3...7.....77.......777.777...777777777777...777777..7....................................................
            ....................................................3.3...7...777.......77.777777......3....7777777777777777....................................................
            ...................................................3..3..7..77.7....777777777.7..7777.777777377....77.....7777777...............................................
            ..................................................33..3..777..77...77773333..7777777777777777777777777777777...7................................................
            .................................................33...377....77..7777777777777777777777737777777777777777777777.................................................
            ..................................3.............3.3..777...77777777777777....7.......333333377777.7.7.3.77..7777777777..........................................
            ..................................3............3.377737...7777777777........7......33.....77.3.33777733737.7......77............................................
            ...................................3.........33.77...7777777...77.73........7...333.3..777.7.3....3.7777737333.777..............................................
            ....................................3.......3.777777777.7.7...77..7........7..33...3.77....7.3.....377..7777777.................................................
            ....................................3......7777.777.73.7.7...7...7.........733....377.33337...3....77.777377777.................................................
            .....................................3....37.777....7.7.7...7....7.......337....777...3...7333333373737777377..3................................................
            .....................................3...7777..37..737.7..77....7.....333.7...77.3....3..7....3..7..777777733333................................................
            ......................................777...7.3.7.7.7.7..77....37...33....7777...3....3..7....377.777.77...3...33333............................................
            ....................................77.3.33..73..7.73.7777.....7..33.....77.....3.....3..7....7.77.7777.3...3...3.3.............................................
            ......................................77...3.7...773.77.7.....7333.....777......3.....3.7....777.77.77...3...3..3.3.............................................
            ........................................777.337.777377.7.....37.....777..7.....3.......37..77.777...77....3..3...3..............................................
            .........................................3.77.777..77.7....337....77..3373333333.......7777777.7....77.....3.33..3..............................................
            .........................................3..37773.73773333333737773333777.............77.777.373..777......33...3.3.............................................
            ..........................................33337777337......3777...7777.............777777333777777..7....33..3..3.3.............................................
            ...........................................3.7.77.7777.....7777777..........77777777777777777......7...33.....33..3.............................................
            ..........................................3.77777.7.377.777773......77777777..777777777.3.7........7.33........3...3............................................
            ..........................................377.7..73..777777.77777777.......7777777..7...37........733........33....3............................................
            .........................................377.7..777777777777..3......7777773777....7....7........37........33.3.....3...........................................
            .........................................777777777773...77777777777773777.777....77....73......33.7......33...3.....3...........................................
            ........................................77777.73377777777777777773777777777.....7....77.3....33..7......3....3.......3..........................................
            ...........................................7.7....37777777.733377777777777777777....7...3.77777777....33.....3.......3..........................................
            ..........................................7.7.777777..33337.7..3..777.......777777777777773.........33......3........3..........................................
            .........................................7.777......7...33733777777777777777...........33.........33........3.........3.........................................
            ........................................7......777777777777777773....................33..........3.........3........333.........................................
            .......................................77777777......7....7777333333...............33..........33.....333333...33333............................................
            .....................................................7..77.......3333333.........33.........3333333333.....3333.................................................
            ......................................................77..........3.333.3333...33.33333333333.........33333.....................................................
            ..................................................................3...333333333333........3......33333..........................................................
            ...................................................................33333.333............33..33333...............................................................
            ...........................................................................3333.......333333....................................................................
            .............................................................................33333.33333........................................................................
            ...............................................................................33333............................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            .................8..............................................................................................................................................
            .................8..............................................................................................................................................
            .................8.........................88..........8........................................................................................................
            .................88.......................8.8.........88........................................................................................................
            .................88......................8..8........8.8...................88888................................................................................
            .................88....................88...8........8.8........................8...............................................................................
            ................8.8...................8.....8.......8..8.........................888............................................................................
            ................8.8..................8......8.......8..8......................88....888.........................................................................
            ................8.8.................8......8........8..8......................8.......8..............8888.......................................................
            ................8..8..............88.......8.......8...8......................8.......8..................8......................................................
            ................8..8............88.........8......8....8.....................8.......88...................888...................................................
            ................8...88.......888...........8......8....8.....................8....888.......................8...................................................
            ................8.....8888888..............8.....8....8......................8..............................8...................................................
            ................8..........................8...88888888888888................8.............................8....................................................
            ................8..........................8....8.....8......................8...........................88.....................................................
            ................8..........................8....8....8......................8...........................8.......................................................
            ................8..........................8....8....8......................8..........................8........................................................
            ................8.........................8....8.....8......................8.........................8.........................................................
            ................8.........................8...8.....8.......................8........................88.........................................................
            ..........................................8...8.....8.......................8........................88............88888888.....................................
            .............................................8.....8........................8.........................88.......8888.............................................
            ...................................................8........................8..........................88888888.................................................
            ...................................................8........................8...................................................................................
            ..................................................8........................8....................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `, img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    }
    if (game_Speed > 50) {
        game_Speed += 0 - 50
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.BadFood, function (sprite, otherSprite) {
    game.over(false)
})
function SpawnBadFood () {
    mySprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 1 1 . . . . . . . . . . 
        . . . 1 2 2 1 . . . . . . . . . 
        . . . 1 2 2 2 1 . . . . . . . . 
        . . . 1 2 2 2 2 1 . . . . . . . 
        . . . 1 2 2 2 2 2 1 . . . . . . 
        . . . 1 2 2 2 2 2 2 1 . . . . . 
        . . . . 1 2 2 2 2 2 2 1 . . . . 
        . . . . . 1 2 2 2 2 2 2 1 . . . 
        . . . . . . 1 2 2 2 2 2 2 1 . . 
        . . . . . . . 1 1 1 1 1 1 . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.BadFood)
    mySprite.setPosition(randint(0, scene.screenWidth()), randint(0, scene.screenHeight()))
    mySprite.setFlag(SpriteFlag.StayInScreen, true)
    for (let value of body) {
        if (mySprite.overlapsWith(value)) {
            mySprite.destroy()
            SpawnBadFood()
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.body_part, function (sprite, otherSprite) {
    game.over(false)
})
let counter = 0
let i = 0
let head: Sprite = null
let mySprite: Sprite = null
let bodypartTexture: Image = null
let body: Sprite[] = []
let dy = 0
let dx = 0
let hungry = false
let game_Speed = 0
game_Speed = 200
hungry = true
SetUpSnake()
game.onUpdateInterval(50, function () {
    if (i >= game_Speed) {
        i = 0
        counter = body.length - 1
        while (counter > 0) {
            body[counter].x = body[counter - 1].x
            body[counter].y = body[counter - 1].y
            counter += -1
        }
        body[0].setPosition(head.x, head.y)
        head.x += dx
        head.y += dy
    } else {
        i += 50
    }
})
game.onUpdateInterval(1000, function () {
    if (hungry) {
        SpawnFood()
        SpawnBadFood()
        hungry = false
    }
})
forever(function () {
    if (head.x < 0) {
        head.x = scene.screenWidth()
    }
    if (head.x > scene.screenWidth()) {
        head.x = 0
    }
    if (head.y < 0) {
        head.y = scene.screenHeight()
    }
    if (head.y > scene.screenHeight()) {
        head.y = 0
    }
})
