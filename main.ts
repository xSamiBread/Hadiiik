namespace SpriteKind {
    export const body_part = SpriteKind.create()
    export const BadFood = SpriteKind.create()
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = 0
    dy = -6
})
function AddBodyPart () {
    body.push(sprites.create(bodypartTexture, SpriteKind.body_part))
    body[body.length - 1].x = body[body.length - 2].x - dx
    body[body.length - 1].y = body[body.length - 2].y - dy
}
function changeGameTexturesAndKillBadFood (backgroundImage: Image, bodyImage: Image) {
    scene.setBackgroundImage(backgroundImage)
    for (let part of body) {
        part.setImage(bodyImage)
        bodypartTexture = bodyImage
    }
    for (let value of sprites.allOfKind(SpriteKind.BadFood)) {
        value.destroy()
    }
}
function SpawnFood () {
    mySprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 1 1 . . . . . . . . . . 
        . . . 1 7 3 1 . . . . . . . . . 
        . . . 1 7 3 3 1 . . . . . . . . 
        . . . 1 7 3 f 3 1 . . . . . . . 
        . . . 1 7 3 3 3 3 1 . . . . . . 
        . . . 1 7 7 f 3 f 3 1 . . . . . 
        . . . . 1 7 7 3 3 3 3 1 . . . . 
        . . . . . 1 7 7 3 f 3 3 1 . . . 
        . . . . . . 1 7 7 7 7 7 7 1 . . 
        . . . . . . . 1 1 1 1 1 1 . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Food)
    mySprite.setPosition(randint(0, scene.screenWidth()), randint(0, scene.screenHeight()))
    mySprite.setFlag(SpriteFlag.StayInScreen, true)
    for (let value of body) {
        if (mySprite.overlapsWith(value)) {
            mySprite.destroy()
            SpawnBadFood()
        }
    }
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = -6
    dy = 0
})
function SetUpSnake () {
    head = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 7 7 7 7 1 . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Player)
    dx = 8
    dy = 0
    bodypartTexture = img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 6 6 6 6 1 . . . . . 
        . . . . . 1 1 1 1 1 1 . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `
    body = [sprites.create(bodypartTexture, SpriteKind.body_part)]
    head.setPosition(scene.screenWidth() / 2, scene.screenHeight() / 2)
    body[0].setPosition(head.x - dx, head.y - dy)
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = 6
    dy = 0
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    dx = 0
    dy = 6
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Food, function (sprite, otherSprite) {
    music.baDing.play()
    otherSprite.destroy(effects.spray, 500)
    AddBodyPart()
    hungry = true
    info.changeScoreBy(1)
    if (info.score() == 5) {
        changeGameTexturesAndKillBadFood(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ...............................................................33...............................................................................................
            ..............................................................3..333............................................................................................
            .............................................................3......333.........................................................................................
            .......................................................3333333333333333333......................................................................................
            .......................................................3...3.............33333333333333333333333................................................................
            ......................................................3..33......33333333333333333333......3....3...............................................................
            ......................................................33333333333................333.......3.....3..............................................................
            .....................................................3.3............................333....3.....3..............................................................
            .....................................................333...............................33..3......3.............................................................
            ....................................................33.3...............................3....3......3............................................................
            ....................................................3.3................................3....3......3............................................................
            ...................................................3..3...............................3.....33......3...........................................................
            ..................................................33..3..............333333...........3...333.3......3..........................................................
            .................................................33...3..............3.....33333333333.333..3..3......3.........................................................
            ..................................3.............3.3..3..............3................3333333333.3.....3.........................................................
            ..................................3............3.3...3.............3...............33........3.3333333333.......................................................
            ...................................3.........33..3...3.............3............333.3........3....3.....333333..................................................
            ....................................3.......3...3....3............3...........33...3.........3.....3....3.....3.................................................
            ....................................3......3....3....3...........3.........333....3...33333...3.....3....3....3.................................................
            .....................................3....3....3....3............3.......33.......3...3....33333333333....3....3................................................
            .....................................3...3.....3....3...........3.....333........3....3.......3......33333333333................................................
            ......................................3.3.....3.....3..........3....33...........3....3.......3........3...3...33333............................................
            .......................................3.33...3.....3..........3..33............3.....3.......3.........3...3...3.3.............................................
            .......................................3...3.3.....3..........3333..............3.....3........3.........3...3..3.3.............................................
            ........................................3...33.....3.........33................3.......3.......3..........3..3...3..............................................
            .........................................3..3.3....3.......333........3333333333.......3.......3...........3.33..3..............................................
            .........................................3..3..33..3333333333333333333.................3.....333...........33...3.3.............................................
            ..........................................3333333333.......33..........................3.3333............33..3..3.3.............................................
            ...........................................3......33.......33........................3333..............33.....33..3.............................................
            ..........................................3.......3.33....3..3..................33333...3............33........3...3............................................
            ..........................................3.......3...3..3...3..............3333........3..........33........33....3............................................
            .........................................33......33....333....3........33333............3........33........33.3.....3...........................................
            ...........................................3333....33...33....3....3333.................3......33........33...3.....3...........................................
            ...............................................333...333..33..33333.....................3....33.........3....3.......3..........................................
            ..................................................3333.33...3333........................3..33.........33.....3.......3..........................................
            ......................................................33333....3.........................33.........33......3........3..........................................
            ........................................................333333..3......................33.........33........3.........3.........................................
            ...........................................................333333....................33..........3.........3........333.........................................
            ..............................................................333333...............33..........33.....333333...33333............................................
            .................................................................3333333.........33.........3333333333.....3333.................................................
            ..................................................................3.333.3333...33.33333333333.........33333.....................................................
            ..................................................................3...333333333333........3......33333..........................................................
            ...................................................................33333.333............33..33333...............................................................
            ...........................................................................3333.......333333....................................................................
            .............................................................................33333.33333........................................................................
            ...............................................................................33333............................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            .....................3..........................................................................................................................................
            .....................3...........................................................................3..............................................................
            ....................3..............3............................................................33..............................................................
            ....................33...........333............................................................3...............................................................
            ....................33..........3.3............33.............................................333...............................................................
            ....................33........33..3..........33.3..............3333..........................3..3...............................................................
            ....................3.33...333...3..........3...3..................3........................3...3...............................................................
            ....................3..3333......3.........3....3...................3333...................33...3...............................................................
            ....................3...........3.........3.....3............33.........33................3....3................................................................
            ....................3...........3........3......3..........33.3...........33.............3.....3................................................................
            ....................3..........3........3.333...3......3333...3...........33............33.....3................................................................
            ...................3...........3........3....3333333333......3........3333.............3.......3................................................................
            ...................3..........3........3.......3.............3........................3........3................................................................
            ...................3..........3........3......3.............3.........................3........3................................................................
            ...................3.........3........3.......3.............3.........................3........3................................................................
            ...................3.........3.......3.......3..............3........................3.........3................................................................
            ..................3.........3.......3.......33.............3..................................3.................................................................
            ..................3.........3.......3.......3..............3..................................3.................................................................
            ..................3.......................................3..................................3..................................................................
            ..........................................................3..................................3..................................................................
            ............................................................................................3...................................................................
            ............................................................................................3...................................................................
            ............................................................................................3...................................................................
            ............................................................................................3...................................................................
            ...........................................................................................3....................................................................
            ...........................................................................................3....................................................................
            ..........................................................................................3.....................................................................
            ..........................................................................................3.....................................................................
            .........................................................................................3......................................................................
            .........................................................................................3......................................................................
            .........................................................................................3......................................................................
            ........................................................................................3.......................................................................
            ........................................................................................3.......................................................................
            .......................................................................................3........................................................................
            .......................................................................................3........................................................................
            ......................................................................................3.........................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `, img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 3 3 3 3 1 . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    } else if (info.score() == 10) {
        changeGameTexturesAndKillBadFood(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            .............................................................................7..................................................................................
            ............................................................................7.7.................................................................................
            ...........................................................................7...77...............................................................................
            ...............................................................33.........7......7..............................................................................
            ..............................................................3..333.....7........7.............................................................................
            .............................................................3......333.7........777............................................................................
            .......................................................3333333333333333733.....777..7........888................................................................
            .......................................................3...3..........7..333377337333773338888877...............................................................
            ......................................................3..33......33337333377733373333..8888887773...............................................................
            ......................................................33333337333...7...77......7333.8888873...7.3..............................................................
            .....................................................3.3....7......777777.......7.888877.7.888888888............................................................
            .....................................................333....7.....777....7777788888788888883..7..88......7777...................................................
            ....................................................33.3...7.....77.......88888888887777777777888..777777..7....................................................
            ....................................................3.3...7...777....888888887777......3.8888877777777777777....................................................
            ...................................................3..3..7..77888888877777777.7..77788888777377....77.....7777777...............................................
            ..................................................33..3.88888888...77773333..7888888777777777777777777777777...7................................................
            .................................................3888888888..77..7777777788888777777777737777777777777777777777.................................................
            ..................................3.........888888388887...77777777788888....7.......333333377777.7.7.3.77..7777777777..........................................
            ..................................3...888888...88887737...7777778888........7......33.....77.3.888887337378888888888888888888888................................
            .................................88888....88888.77...777777888887.73........7...333.3..777.8888888888888887333.777...........88.................................
            .............................8888..8888888..3.7777777778888...77..7........7..33...388888888888....377..7777777............88...................................
            ..........................888888888.3......7777.77888887.7...7...7.........88888888888333888..3....77.777377777.........888.....................................
            ........................88888........3....37888888..7.7.7...7....7..8888888888..777..8888.7333333373737777377..3......88........................................
            .....................................38888887..37..737.7888888888888..333.7...77.8888.3..7....3..7..777777733333...888..........................................
            .................................88888777...7.888888888888888..37...33....77778883....3..7....377.777.8888.3...33883............................................
            ..........................8888888...77888888883..888888777.....7..33.....77888..3.....3..7....7.7788888.3...3..88.3.............................................
            .....................88888.8888888888877..8888888773.77.7.....7333.....7888.....3.....3.7....788887.77...3..888.3.3.............................................
            .................8888888888.........8888887.337.777377.7.....37.....8888.7.....3.......3888888777...77...888.3...3..............................................
            ................................8888.....3.77.777..77.7....337..8888..3373333333..888888877777.7....77888..3.33..3....8888......................................
            .........................................3..37773.737733333338887733337778888888888...77.777.373..7888.....33...3.88888.........................................
            ..........................................33337777337......8877.8888888888888......7777773337777888.7....33.8888883.............................................
            ...........................................3.7.77.7777...8888888788888......77777777777777777888...7...888888.33..3.............................................
            ..........................................3.77777.7.377.888778888...77777777..777777777.38888...8888888........3...3............................................
            ..........................................377.7..73..777778887777777.......7777777..78888888888888833........33....3............................................
            .........................................377.7..777777788877..3......7777773777...888888888888...37........33.3.....3...........................................
            .........................................77777777777888.77777777777773777.777.88888888873......33.7......33...3.....3...........................................
            ........................................77777.733788777777777777737777778888888.7....77.3....33..7......3....3.......3..........................................
            ...........................................7.7..8837777777.733377888888888877777....7...3.77777777....33.....3.......3..........................................
            ..........................................7.7.77788888888888888888888888....777777777777773.........33......3........3..88888888................................
            .........................................7.777......7...33733888877887777777...........33.........33........88888888888888888...................................
            ........................................7......77777777777788777888..................33......88888888888888888888888883.........................................
            .......................................77777777......7...88778883333............8888888888888888888888888888...33333............................................
            .....................................................7..778888888888888888888888.33.........3333333333.....3333.................................................
            ......................................................8888..88888888888.3333...33.33333333333.........33333.....................................................
            ...................................................888888888......3...333333333333........3......33333..........................................................
            .................................................888...............33333.333............33..33333...............................................................
            ..................8......................88................................3333.......333333....................................................................
            ..................8.....................8.8..................................33333.33333........................................................................
            ..................8.....................8.8....................................33333............................................................................
            ..................8...................88..8.....................................................................................................................
            ..................8..................8....8.....................................................................................................................
            ..................8.................8.....8.....................................................................................................................
            ..................8................8......8.....................................................................................................................
            ..................88..............8.......8.....................................................................................................................
            ..................88.............8........8.........................................888.........................................................................
            ...................8............8.........8.........8.................................8.........................................................................
            ...................8............8.........8........88..........................8.......8........................................................................
            ...................8...........8..........8.......8.8..........................8.......8........................................................................
            ...................8..........8...........8......8..8..........................8.......8.....................888................................................
            ...................88........8............8.....8...8..........................8......8.........................888888888888....................................
            ...................8.8......8.............8....8...8...........................8.88888......................................88888...............................
            ...................8..8...88..............8....8...8...........................8.................................................8888...........................
            ...................8...888................8....8...8...........................8.....................................................88.........................
            ...................8......................888.8....8...........................8......................................................8.........................
            ...................8......................8..88888888..........................8......................................................8.........................
            ...................8......................8.8......8.8888888888...............8......................................................8..........................
            ...................8.....................8.88......8..........................8.....................................................8...........................
            ...................8.....................88.......8...........................8...................................................88............................
            ....................8....................8.......8...........................8................................................8888..............................
            ....................8....................8......8............................8..........................................888888..................................
            ........................................88......8............................8....................................888888........................................
            ........................................8.......8...........................8................................88888..............................................
            ...............................................8...........................8.............................8888...................................................
            ..............................................8.......................................................888..................88888888.............................
            .............................................88......................................................888........88888888888.....................................
            ........................................................................................................88888888................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `, img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 5 5 5 5 1 . . . . . 
            . . . . . 1 1 1 1 1 1 . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `)
    }
    if (game_Speed > 50) {
        game_Speed += 0 - 50
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.BadFood, function (sprite, otherSprite) {
    game.over(false)
})
function SpawnBadFood () {
    mySprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . 1 1 . . . . . . . . . . 
        . . . 1 2 2 1 . . . . . . . . . 
        . . . 1 2 2 2 1 . . . . . . . . 
        . . . 1 2 2 2 2 1 . . . . . . . 
        . . . 1 2 2 2 2 2 1 . . . . . . 
        . . . 1 2 2 2 2 2 2 1 . . . . . 
        . . . . 1 2 2 2 2 2 2 1 . . . . 
        . . . . . 1 2 2 2 2 2 2 1 . . . 
        . . . . . . 1 2 2 2 2 2 2 1 . . 
        . . . . . . . 1 1 1 1 1 1 . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.BadFood)
    mySprite.setPosition(randint(0, scene.screenWidth()), randint(0, scene.screenHeight()))
    mySprite.setFlag(SpriteFlag.StayInScreen, true)
    for (let value of body) {
        if (mySprite.overlapsWith(value)) {
            mySprite.destroy()
            SpawnBadFood()
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.body_part, function (sprite, otherSprite) {
    game.over(false)
})
let counter = 0
let i = 0
let head: Sprite = null
let mySprite: Sprite = null
let bodypartTexture: Image = null
let body: Sprite[] = []
let dy = 0
let dx = 0
let hungry = false
let game_Speed = 0
game_Speed = 200
hungry = true
SetUpSnake()
game.onUpdateInterval(50, function () {
    if (i >= game_Speed) {
        i = 0
        counter = body.length - 1
        while (counter > 0) {
            body[counter].x = body[counter - 1].x
            body[counter].y = body[counter - 1].y
            counter += -1
        }
        body[0].setPosition(head.x, head.y)
        head.x += dx
        head.y += dy
    } else {
        i += 50
    }
})
game.onUpdateInterval(1000, function () {
    if (hungry) {
        SpawnFood()
        SpawnBadFood()
        hungry = false
    }
})
forever(function () {
    if (head.x < 0) {
        head.x = scene.screenWidth()
    }
    if (head.x > scene.screenWidth()) {
        head.x = 0
    }
    if (head.y < 0) {
        head.y = scene.screenHeight()
    }
    if (head.y > scene.screenHeight()) {
        head.y = 0
    }
})
